<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="What the package does (one paragraph).">
<title>What the Package Does (One Line, Title Case) â€¢ aggregate.model</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="What the Package Does (One Line, Title Case)">
<meta property="og:description" content="What the package does (one paragraph).">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">aggregate.model</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/example-workflow.html">Example Workflow</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="aggregatemodel">aggregate.model<a class="anchor" aria-label="anchor" href="#aggregatemodel"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of the aggregate.model Package is to implement and operationalise the Aggregate Model, developed by Moritz Schwarz, Jonas Kurle, Felix Pretis, and Andrew Martinez. This is an adaptation of the <a href="https://normetrics.no/nam/" class="external-link">Norwegian Aggregate Model</a>, developed by Gunnar Bardsen and Ragnar Nymoen.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of aggregate.model from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"moritzpschwarz/aggregate.model"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="basic-workflow">Basic Workflow<a class="anchor" aria-label="anchor" href="#basic-workflow"></a>
</h2>
<p>This is an example which shows you how to run the model:</p>
<p>First we load the package:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://moritzschwarz.org/getspanel/" class="external-link">aggregate.model</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: gets</span></span>
<span><span class="co">#&gt; Loading required package: zoo</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'zoo'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     as.Date, as.Date.numeric</span></span>
<span><span class="co">#&gt; Loading required package: parallel</span></span></code></pre></div>
<div class="section level3">
<h3 id="specify-the-model">Specify the model<a class="anchor" aria-label="anchor" href="#specify-the-model"></a>
</h3>
<p>The we calibrate the model specification and save this in a tibble. Here the column names and the structure of the specification table must follow the basic structure below.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">spec</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span></span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"d"</span>,</span>
<span>    <span class="st">"d"</span>,</span>
<span>    <span class="st">"n"</span>,</span>
<span>    <span class="st">"n"</span>,</span>
<span>    <span class="st">"n"</span>,</span>
<span>    <span class="st">"n"</span>,</span>
<span>    <span class="st">"d"</span>,</span>
<span>    <span class="st">"n"</span>,</span>
<span>    <span class="st">"n"</span>,</span>
<span>    <span class="st">"d"</span>,</span>
<span>    <span class="st">"n"</span>,</span>
<span>    <span class="st">"n"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  dependent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"StatDiscrep"</span>,</span>
<span>    <span class="st">"TOTS"</span>,</span>
<span>    <span class="st">"Import"</span>,</span>
<span>    <span class="st">"FinConsExpHH"</span>,</span>
<span>    <span class="st">"GCapitalForm"</span>,</span>
<span>    <span class="st">"Emissions"</span>,</span>
<span>    <span class="st">"GDP"</span>,</span>
<span>    <span class="st">"GValueAddGov"</span>, <span class="co"># as in NAM, technical relationship</span></span>
<span>    <span class="st">"GValueAddManuf"</span>, <span class="co"># more complicated in NAM, see 2.3.3 and 6.3.1</span></span>
<span>    <span class="st">"DomDemand"</span>, <span class="co"># as in NAM</span></span>
<span>    <span class="st">"GValueAddConstr"</span> ,</span>
<span>    <span class="st">"GValueAddWholesaletrade"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  independent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"TOTS - FinConsExpHH - FinConsExpGov - GCapitalForm - Export"</span>,</span>
<span>    <span class="st">"GValueAdd + Import"</span>,</span>
<span>    <span class="st">"FinConsExpHH + GCapitalForm"</span>,</span>
<span>    <span class="st">""</span>,</span>
<span>    <span class="st">"FinConsExpGov"</span>,</span>
<span>    <span class="st">"GDP"</span>,</span>
<span>    <span class="st">"GValueAddGov + GValueAddAgri + GValueAddIndus + GValueAddConstr + GValueAddWholesaletrade + GValueAddInfocom + GValueAddFinance + GValueAddRealest + GValueAddResearch + GValueAddArts"</span>,</span>
<span>    <span class="st">"FinConsExpGov"</span>, <span class="co"># as in NAM, technical relationship</span></span>
<span>    <span class="st">"DomDemand + Export + LabCostManuf"</span>, <span class="co"># NAM uses 'export market indicator' not exports - unclear what this is, NAM uses unit labour cost in NOR manufacturing relative to the foreign price level - here is just total labour cost</span></span>
<span>    <span class="st">"FinConsExpHH + FinConsExpGov + GCapitalForm"</span>,</span>
<span>    <span class="st">"DomDemand + LabCostConstr + BuildingPermits"</span>, <span class="co"># in NAM some form of YFP2J = 0.3JBOL + 0.2JF P N + 0.3JO + 0.3JOIL. Unclear what this is. Using Building Permits instead</span></span>
<span>    <span class="st">"DomDemand + Export + LabCostService"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>To summarise this, we can print out the specification table:</p>
<table class="table table lightable-paper" style='margin-left: auto; margin-right: auto; font-family: "Arial Narrow", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>
<thead><tr>
<th style="text-align:left;">
type
</th>
<th style="text-align:left;">
dependent
</th>
<th style="text-align:left;">
independent
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
d
</td>
<td style="text-align:left;">
StatDiscrep
</td>
<td style="text-align:left;">
TOTS - FinConsExpHH - FinConsExpGov - GCapitalForm - Export
</td>
</tr>
<tr>
<td style="text-align:left;">
d
</td>
<td style="text-align:left;">
TOTS
</td>
<td style="text-align:left;">
GValueAdd + Import
</td>
</tr>
<tr>
<td style="text-align:left;">
n
</td>
<td style="text-align:left;">
Import
</td>
<td style="text-align:left;">
FinConsExpHH + GCapitalForm
</td>
</tr>
<tr>
<td style="text-align:left;">
n
</td>
<td style="text-align:left;">
FinConsExpHH
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
n
</td>
<td style="text-align:left;">
GCapitalForm
</td>
<td style="text-align:left;">
FinConsExpGov
</td>
</tr>
<tr>
<td style="text-align:left;">
n
</td>
<td style="text-align:left;">
Emissions
</td>
<td style="text-align:left;">
GDP
</td>
</tr>
<tr>
<td style="text-align:left;">
d
</td>
<td style="text-align:left;">
GDP
</td>
<td style="text-align:left;">
GValueAddGov + GValueAddAgri + GValueAddIndus + GValueAddConstr + GValueAddWholesaletrade + GValueAddInfocom + GValueAddFinance + GValueAddRealest + GValueAddResearch + GValueAddArts
</td>
</tr>
<tr>
<td style="text-align:left;">
n
</td>
<td style="text-align:left;">
GValueAddGov
</td>
<td style="text-align:left;">
FinConsExpGov
</td>
</tr>
<tr>
<td style="text-align:left;">
n
</td>
<td style="text-align:left;">
GValueAddManuf
</td>
<td style="text-align:left;">
DomDemand + Export + LabCostManuf
</td>
</tr>
<tr>
<td style="text-align:left;">
d
</td>
<td style="text-align:left;">
DomDemand
</td>
<td style="text-align:left;">
FinConsExpHH + FinConsExpGov + GCapitalForm
</td>
</tr>
<tr>
<td style="text-align:left;">
n
</td>
<td style="text-align:left;">
GValueAddConstr
</td>
<td style="text-align:left;">
DomDemand + LabCostConstr + BuildingPermits
</td>
</tr>
<tr>
<td style="text-align:left;">
n
</td>
<td style="text-align:left;">
GValueAddWholesaletrade
</td>
<td style="text-align:left;">
DomDemand + Export + LabCostService
</td>
</tr>
</tbody>
</table>
<p>In order to run this model, we also need a dictionary that translates our model variables to EUROSTAT codes so that the download process can be automated. You can either pass a new dictionary to the model function, or you can use the built in dictionary <code><a href="reference/dict.html">aggregate.model::dict</a></code>:</p>
<table class="table table lightable-paper" style='margin-left: auto; margin-right: auto; font-family: "Arial Narrow", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>
<thead><tr>
<th style="text-align:left;">
eurostat_code
</th>
<th style="text-align:left;">
model_varname
</th>
<th style="text-align:left;">
full_name
</th>
<th style="text-align:left;">
dataset_id
</th>
<th style="text-align:left;">
var_col
</th>
<th style="text-align:left;">
nace_r2
</th>
<th style="text-align:left;">
cpa2_1
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
TOTS
</td>
<td style="text-align:left;">
TOTS
</td>
<td style="text-align:left;">
Total Supply
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
B1GQ
</td>
<td style="text-align:left;">
GDP
</td>
<td style="text-align:left;">
Gross domestic product at market prices
</td>
<td style="text-align:left;">
namq_10_gdp
</td>
<td style="text-align:left;">
na_item
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
B1G
</td>
<td style="text-align:left;">
GValueAdd
</td>
<td style="text-align:left;">
Value added, gross
</td>
<td style="text-align:left;">
namq_10_a10
</td>
<td style="text-align:left;">
na_item
</td>
<td style="text-align:left;">
TOTAL
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
P6
</td>
<td style="text-align:left;">
Export
</td>
<td style="text-align:left;">
Exports of goods and services
</td>
<td style="text-align:left;">
namq_10_gdp
</td>
<td style="text-align:left;">
na_item
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
P7
</td>
<td style="text-align:left;">
Import
</td>
<td style="text-align:left;">
Imports of goods and services
</td>
<td style="text-align:left;">
namq_10_gdp
</td>
<td style="text-align:left;">
na_item
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
P5G
</td>
<td style="text-align:left;">
GCapitalForm
</td>
<td style="text-align:left;">
Gross capital formation
</td>
<td style="text-align:left;">
namq_10_gdp
</td>
<td style="text-align:left;">
na_item
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
P3
</td>
<td style="text-align:left;">
FinConsExp
</td>
<td style="text-align:left;">
Final consumption expenditure
</td>
<td style="text-align:left;">
namq_10_gdp
</td>
<td style="text-align:left;">
na_item
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
P3_S13
</td>
<td style="text-align:left;">
FinConsExpGov
</td>
<td style="text-align:left;">
Final consumption expenditure of general government
</td>
<td style="text-align:left;">
namq_10_gdp
</td>
<td style="text-align:left;">
na_item
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
P31_S14_S15
</td>
<td style="text-align:left;">
FinConsExpHH
</td>
<td style="text-align:left;">
Household and NPISH final consumption expenditure
</td>
<td style="text-align:left;">
namq_10_gdp
</td>
<td style="text-align:left;">
na_item
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
YA0
</td>
<td style="text-align:left;">
StatDiscrep
</td>
<td style="text-align:left;">
Statistical discrepancy (expenditure approach)
</td>
<td style="text-align:left;">
namq_10_gdp
</td>
<td style="text-align:left;">
na_item
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
GHG
</td>
<td style="text-align:left;">
Emissions
</td>
<td style="text-align:left;">
Greenhouse Gas Emissions (All NACE and HH)
</td>
<td style="text-align:left;">
env_ac_aigg_q
</td>
<td style="text-align:left;">
airpol
</td>
<td style="text-align:left;">
TOTAL_HH
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
LM-LCI-TOT
</td>
<td style="text-align:left;">
LabCostManuf
</td>
<td style="text-align:left;">
Manufacturing Labour cost index - Total Labour Cost
</td>
<td style="text-align:left;">
ei_lmlc_q
</td>
<td style="text-align:left;">
indic
</td>
<td style="text-align:left;">
C
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
DomDemand
</td>
<td style="text-align:left;">
DomDemand
</td>
<td style="text-align:left;">
Domestic Demand
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
B1G
</td>
<td style="text-align:left;">
GValueAddManuf
</td>
<td style="text-align:left;">
Value added, gross Manufacturing
</td>
<td style="text-align:left;">
namq_10_a10
</td>
<td style="text-align:left;">
na_item
</td>
<td style="text-align:left;">
C
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
B1G
</td>
<td style="text-align:left;">
GValueAddGov
</td>
<td style="text-align:left;">
Value added, gross Government
</td>
<td style="text-align:left;">
namq_10_a10
</td>
<td style="text-align:left;">
na_item
</td>
<td style="text-align:left;">
O-Q
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
LM-LCI-TOT
</td>
<td style="text-align:left;">
LabCostConstr
</td>
<td style="text-align:left;">
Construction Labour cost index - Total Labour Cost
</td>
<td style="text-align:left;">
ei_lmlc_q
</td>
<td style="text-align:left;">
indic
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
PSQM
</td>
<td style="text-align:left;">
BuildingPermits
</td>
<td style="text-align:left;">
Building permits - m^2 useful floorspace - Buildings
</td>
<td style="text-align:left;">
sts_cobp_q
</td>
<td style="text-align:left;">
indic_bt
</td>
<td style="text-align:left;">
F_CC1
</td>
<td style="text-align:left;">
CPA_F41001_41002
</td>
</tr>
<tr>
<td style="text-align:left;">
LM-LCI-TOT
</td>
<td style="text-align:left;">
LabCostService
</td>
<td style="text-align:left;">
Service Labour cost index - Total Labour Cost
</td>
<td style="text-align:left;">
ei_lmlc_q
</td>
<td style="text-align:left;">
indic
</td>
<td style="text-align:left;">
G-N
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
B1G
</td>
<td style="text-align:left;">
GValueAddConstr
</td>
<td style="text-align:left;">
Value added, gross Construction
</td>
<td style="text-align:left;">
namq_10_a10
</td>
<td style="text-align:left;">
na_item
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
B1G
</td>
<td style="text-align:left;">
GValueAddAgri
</td>
<td style="text-align:left;">
Value added, gross Agriculture
</td>
<td style="text-align:left;">
namq_10_a10
</td>
<td style="text-align:left;">
na_item
</td>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
B1G
</td>
<td style="text-align:left;">
GValueAddIndus
</td>
<td style="text-align:left;">
Value added, gross Industry
</td>
<td style="text-align:left;">
namq_10_a10
</td>
<td style="text-align:left;">
na_item
</td>
<td style="text-align:left;">
B-E
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
B1G
</td>
<td style="text-align:left;">
GValueAddInfocom
</td>
<td style="text-align:left;">
Value added, gross Information and Communication
</td>
<td style="text-align:left;">
namq_10_a10
</td>
<td style="text-align:left;">
na_item
</td>
<td style="text-align:left;">
J
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
B1G
</td>
<td style="text-align:left;">
GValueAddFinance
</td>
<td style="text-align:left;">
Value added, gross Financial Services
</td>
<td style="text-align:left;">
namq_10_a10
</td>
<td style="text-align:left;">
na_item
</td>
<td style="text-align:left;">
K
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
B1G
</td>
<td style="text-align:left;">
GValueAddRealest
</td>
<td style="text-align:left;">
Value added, gross Real Estate
</td>
<td style="text-align:left;">
namq_10_a10
</td>
<td style="text-align:left;">
na_item
</td>
<td style="text-align:left;">
L
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
B1G
</td>
<td style="text-align:left;">
GValueAddResearch
</td>
<td style="text-align:left;">
Value added, gross Scientific and Professional Services
</td>
<td style="text-align:left;">
namq_10_a10
</td>
<td style="text-align:left;">
na_item
</td>
<td style="text-align:left;">
M_N
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
B1G
</td>
<td style="text-align:left;">
GValueAddArts
</td>
<td style="text-align:left;">
Value added, gross Arts and Entertainment
</td>
<td style="text-align:left;">
namq_10_a10
</td>
<td style="text-align:left;">
na_item
</td>
<td style="text-align:left;">
R-U
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
B1G
</td>
<td style="text-align:left;">
GValueAddWholesaletrade
</td>
<td style="text-align:left;">
Value added, gross Wholesale and retail trade and Tourism
</td>
<td style="text-align:left;">
namq_10_a10
</td>
<td style="text-align:left;">
na_item
</td>
<td style="text-align:left;">
G-I
</td>
<td style="text-align:left;">
NA
</td>
</tr>
</tbody>
</table>
<p>The last step in specifying the model is to create a filter list that determines the country that we want to estimate this for and also which unit we need for each variable. This, for the moment, is quite tedious, but this will be improved in the future:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fa</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>geo <span class="op">=</span> <span class="st">"AT"</span>, s_adj <span class="op">=</span> <span class="st">"SCA"</span>, unit <span class="op">=</span> <span class="st">"CLV05_MEUR"</span><span class="op">)</span></span>
<span><span class="va">fb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>geo <span class="op">=</span> <span class="st">"AT"</span>, s_adj <span class="op">=</span> <span class="st">"SCA"</span>, unit <span class="op">=</span> <span class="st">"CP_MEUR"</span><span class="op">)</span></span>
<span><span class="va">fc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>geo <span class="op">=</span> <span class="st">"AT"</span>, unit <span class="op">=</span> <span class="st">"THS_T"</span><span class="op">)</span></span>
<span><span class="va">fd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>geo <span class="op">=</span> <span class="st">"AT"</span>, s_adj <span class="op">=</span> <span class="st">"SCA"</span><span class="op">)</span></span>
<span><span class="va">fe</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>geo <span class="op">=</span> <span class="st">"AT"</span>, s_adj <span class="op">=</span> <span class="st">"SCA"</span>, unit <span class="op">=</span> <span class="st">"I15"</span><span class="op">)</span></span>
<span><span class="va">ff</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>geo <span class="op">=</span> <span class="st">"AT"</span>, s_adj <span class="op">=</span> <span class="st">"SCA"</span>, unit <span class="op">=</span> <span class="st">"I16"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">filter_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"P7"</span> <span class="op">=</span> <span class="va">fa</span>,</span>
<span>  <span class="st">"YA0"</span> <span class="op">=</span> <span class="va">fb</span>,</span>
<span>  <span class="st">"P31_S14_S15"</span> <span class="op">=</span> <span class="va">fa</span>,</span>
<span>  <span class="st">"P5G"</span> <span class="op">=</span> <span class="va">fa</span>,</span>
<span>  <span class="st">"B1G"</span> <span class="op">=</span> <span class="va">fa</span>,</span>
<span>  <span class="st">"P3_S13"</span> <span class="op">=</span> <span class="va">fa</span>,</span>
<span>  <span class="st">"P6"</span> <span class="op">=</span> <span class="va">fa</span>,</span>
<span>  <span class="st">"GHG"</span> <span class="op">=</span> <span class="va">fc</span>,</span>
<span>  <span class="st">"B1GQ"</span> <span class="op">=</span> <span class="va">fa</span>,</span>
<span>  <span class="st">"PSQM"</span> <span class="op">=</span> <span class="va">fe</span>,</span>
<span>  <span class="st">"LM-LCI-TOT"</span> <span class="op">=</span> <span class="va">ff</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="running-the-model">Running the model<a class="anchor" aria-label="anchor" href="#running-the-model"></a>
</h3>
<p>Now we are ready to run the model with the <code><a href="reference/run_model.html">run_model()</a></code> function:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/run_model.html">run_model</a></span><span class="op">(</span></span>
<span>  specification <span class="op">=</span> <span class="va">spec</span>,</span>
<span>  filter_list <span class="op">=</span> <span class="va">filter_list</span>,</span>
<span>  save_to_disk <span class="op">=</span> <span class="st">"inst/extdata/InputData.xlsx"</span>,</span>
<span>  download <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  trend <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  max.lag <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  saturation.tpval <span class="op">=</span> <span class="fl">0.1</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">NROW</a></span><span class="op">(</span><span class="va">clean_data</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Reading cache file C:\Users\morit\AppData\Local\Temp\RtmpEzG1tu/eurostat/namq_10_gdp_date_code_FF.rds</span></span>
<span><span class="co">#&gt; Table  namq_10_gdp  read from cache file:  C:\Users\morit\AppData\Local\Temp\RtmpEzG1tu/eurostat/namq_10_gdp_date_code_FF.rds</span></span>
<span><span class="co">#&gt; Reading cache file C:\Users\morit\AppData\Local\Temp\RtmpEzG1tu/eurostat/namq_10_a10_date_code_FF.rds</span></span>
<span><span class="co">#&gt; Table  namq_10_a10  read from cache file:  C:\Users\morit\AppData\Local\Temp\RtmpEzG1tu/eurostat/namq_10_a10_date_code_FF.rds</span></span>
<span><span class="co">#&gt; Reading cache file C:\Users\morit\AppData\Local\Temp\RtmpEzG1tu/eurostat/env_ac_aigg_q_date_code_FF.rds</span></span>
<span><span class="co">#&gt; Table  env_ac_aigg_q  read from cache file:  C:\Users\morit\AppData\Local\Temp\RtmpEzG1tu/eurostat/env_ac_aigg_q_date_code_FF.rds</span></span>
<span><span class="co">#&gt; Reading cache file C:\Users\morit\AppData\Local\Temp\RtmpEzG1tu/eurostat/ei_lmlc_q_date_code_FF.rds</span></span>
<span><span class="co">#&gt; Table  ei_lmlc_q  read from cache file:  C:\Users\morit\AppData\Local\Temp\RtmpEzG1tu/eurostat/ei_lmlc_q_date_code_FF.rds</span></span>
<span><span class="co">#&gt; Reading cache file C:\Users\morit\AppData\Local\Temp\RtmpEzG1tu/eurostat/sts_cobp_q_date_code_FF.rds</span></span>
<span><span class="co">#&gt; Table  sts_cobp_q  read from cache file:  C:\Users\morit\AppData\Local\Temp\RtmpEzG1tu/eurostat/sts_cobp_q_date_code_FF.rds</span></span>
<span><span class="co">#&gt; Warning in load_or_download_variables(specification =</span></span>
<span><span class="co">#&gt; module_order_eurostatvars, : Unbalanced panel, will lose more than 20\% of data</span></span>
<span><span class="co">#&gt; when making balanced</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --- Estimation begins ---</span></span>
<span><span class="co">#&gt; Estimating GCapitalForm = FinConsExpGov </span></span>
<span><span class="co">#&gt; Estimating GValueAddGov = FinConsExpGov </span></span>
<span><span class="co">#&gt; Estimating FinConsExpHH =  </span></span>
<span><span class="co">#&gt; Estimating Import = FinConsExpHH + GCapitalForm </span></span>
<span><span class="co">#&gt; Constructing DomDemand = FinConsExpHH + FinConsExpGov + GCapitalForm </span></span>
<span><span class="co">#&gt; Constructing TOTS = GValueAdd + Import </span></span>
<span><span class="co">#&gt; Estimating GValueAddManuf = DomDemand + Export + LabCostManuf </span></span>
<span><span class="co">#&gt; Estimating GValueAddConstr = DomDemand + LabCostConstr + BuildingPermits </span></span>
<span><span class="co">#&gt; Estimating GValueAddWholesaletrade = DomDemand + Export + LabCostService </span></span>
<span><span class="co">#&gt; Constructing StatDiscrep = TOTS - FinConsExpHH - FinConsExpGov - GCapitalForm - Export </span></span>
<span><span class="co">#&gt; Constructing GDP = GValueAddGov + GValueAddAgri + GValueAddIndus + GValueAddConstr + GValueAddWholesaletrade + GValueAddInfocom + GValueAddFinance + GValueAddRealest + GValueAddResearch + GValueAddArts </span></span>
<span><span class="co">#&gt; Estimating Emissions = GDP</span></span></code></pre></div>
<p>The first time that we run this, all data will be downloaded and saved in the folder <code>data/use/InputData.xlsx</code>.</p>
<p>The next time that we run the same model, we can save some time and just load the data from our earlier run:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/run_model.html">run_model</a></span><span class="op">(</span></span>
<span>  specification <span class="op">=</span> <span class="va">spec</span>,</span>
<span>  filter_list <span class="op">=</span> <span class="va">filter_list</span>,</span>
<span>  download <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  inputdata_directory <span class="op">=</span> <span class="st">"inst/extdata"</span>,</span>
<span>  trend <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  max.lag <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  saturation.tpval <span class="op">=</span> <span class="fl">0.1</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">NROW</a></span><span class="op">(</span><span class="va">clean_data</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="forecasting-the-model">Forecasting the model<a class="anchor" aria-label="anchor" href="#forecasting-the-model"></a>
</h3>
<p>Now that we have run the model, we can forecast the model (here using an AR process for the exogenous values and for 10 time periods):</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model_forecast</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/forecast_model.html">forecast_model</a></span><span class="op">(</span><span class="va">model_result</span>, n.ahead <span class="op">=</span> <span class="fl">10</span>, exog_fill_method <span class="op">=</span> <span class="st">"AR"</span>, plot.forecast <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; No exogenous values provided. Model will forecast the exogenous values with an AR4 process (incl. Q dummies, IIS and SIS w 't.pval = 0.001').</span></span>
<span><span class="co">#&gt; Alternative is exog_fill_method = 'last'.</span></span></code></pre></div>
<p>Once we are done, we can plot the forecast:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">model_forecast</span>, order.as.run <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 3 row(s) containing missing values (geom_path).</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-10-1.png" width="100%"></p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>AGPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing aggregate.model</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Moritz Schwarz <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-0340-3780" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/moritzpschwarz/aggregate.model/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/moritzpschwarz/aggregate.model/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Moritz Schwarz.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
